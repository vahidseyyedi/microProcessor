## گزارش کار: کنترل موتور DC با استفاده از آردوینو و PWM

**چکیده:** این گزارش به بررسی نحوه کنترل سرعت و جهت چرخش یک موتور DC با استفاده از میکروکنترلر آردوینو و تکنیک مدولاسیون پهنای پالس (PWM) می‌پردازد. کد ارائه شده، موتور را در حالت‌های مختلف از جمله چرخش با حداکثر سرعت در جهت جلو و عقب، و افزایش تدریجی سرعت از صفر تا حداکثر در هر دو جهت کنترل می‌کند.

**۱. مقدمه:**

کنترل موتورهای DC یکی از کاربردهای رایج میکروکنترلرها است. استفاده از PWM به ما این امکان را می‌دهد که سرعت موتور را به صورت دقیق کنترل کنیم. این گزارش نحوه استفاده از خروجی‌های دیجیتال و PWM آردوینو برای کنترل موتور DC را شرح می‌دهد.

**۲. مواد و تجهیزات:**

*   برد آردوینو Uno (یا برد سازگار)
*   موتور DC
*   درایور موتور (مانند L298N یا مشابه) - **بسیار مهم: بدون درایور موتور، اتصال مستقیم موتور به پین‌های آردوینو می‌تواند به برد آسیب برساند.**
*   دیود محافظ (مانند 1N4001) - برای حفاظت از درایور موتور در برابر جریان برگشتی موتور
*   سیم‌های اتصال
*   منبع تغذیه خارجی برای موتور (در صورت نیاز)
*   کابل USB A-B
*   کامپیوتر با نرم‌افزار Arduino IDE نصب شده

**۳. مراحل انجام کار:**

1.  مدار را طبق شماتیک زیر ببندید:
    *   پین‌های ۸ و ۹ آردوینو به پین‌های ورودی درایور موتور (مانند IN1 و IN2 در L298N)
    *   پین ۱۰ آردوینو (خروجی PWM) به پین فعال‌سازی سرعت درایور موتور (مانند ENA در L298N)
    *   موتور DC به خروجی‌های درایور موتور
    *   اتصال تغذیه و زمین درایور موتور و آردوینو به صورت صحیح
    *   دیود محافظ به صورت معکوس بین دو سر موتور برای جلوگیری از جریان برگشتی
2.  آردوینو را از طریق کابل USB به کامپیوتر وصل کنید.
3.  نرم‌افزار Arduino IDE را باز کنید و یک طرح جدید ایجاد کنید.
4.  کد زیر را در طرح کپی و جایگذاری کنید:

```c++
void setup() {
  pinMode(8, OUTPUT);
  pinMode(9, OUTPUT);
  pinMode(10, OUTPUT);
}

void loop() {
  FullSpeedForward();
  delay(1000);
  FullSpeedBackward();
  delay(1000);
  ZeroTO100();
  delay(1000);
  zeroTo100Backward();
  delay(1000);
}

void FullSpeedForward() {
  digitalWrite(8, HIGH);
  digitalWrite(9, LOW);
  analogWrite(10, 255); // حداکثر سرعت با PWM
}

void FullSpeedBackward() {
  digitalWrite(8, LOW);
  digitalWrite(9, HIGH);
  analogWrite(10, 255); // حداکثر سرعت با PWM
}

void ZeroTO100() {
  for (int i = 0; i < 256; i++) {
    digitalWrite(8, HIGH);
    digitalWrite(9, LOW);
    analogWrite(10, i); // تغییر مقدار PWM برای افزایش سرعت
    delay(20);
  }
}

void zeroTo100Backward() {
  for (int i = 0; i < 256; i++) {
    digitalWrite(8, LOW);
    digitalWrite(9, HIGH);
    analogWrite(10, i); // تغییر مقدار PWM برای افزایش سرعت
    delay(20);
  }
}
```

5.  کد را در برد آردوینو آپلود کنید.
6.  عملکرد موتور را مشاهده کنید.

**۴. نتایج:**

موتور DC طبق برنامه تعیین شده، ابتدا با حداکثر سرعت به جلو، سپس به عقب، و سپس به تدریج از صفر تا حداکثر سرعت در هر دو جهت حرکت می‌کند.

**۵. بحث:**

*   پین‌های ۸ و ۹ برای تعیین جهت چرخش موتور استفاده می‌شوند. با تنظیم سطح HIGH و LOW این پین‌ها، جهت چرخش موتور کنترل می‌شود.
*   پین ۱۰ به عنوان خروجی PWM برای کنترل سرعت موتور استفاده می‌شود. تابع `analogWrite()` مقداری بین ۰ و ۲۵۵ را به این پین ارسال می‌کند که Duty Cycle سیگنال PWM را تعیین می‌کند. مقدار ۲۵۵ معادل حداکثر سرعت و مقدار ۰ معادل توقف موتور است.
*   توابع `FullSpeedForward()` و `FullSpeedBackward()` موتور را با حداکثر سرعت در جهت‌های مختلف به حرکت در می‌آورند.
*   توابع `ZeroTO100()` و `zeroTo100Backward()` با تغییر تدریجی مقدار PWM، سرعت موتور را از صفر تا حداکثر در هر دو جهت افزایش می‌دهند.

**تصاویر:**




**۶. نتیجه‌گیری:**

این آزمایش نشان داد که چگونه می‌توان با استفاده از آردوینو و تکنیک PWM، سرعت و جهت چرخش یک موتور DC را به طور موثر کنترل کرد.

