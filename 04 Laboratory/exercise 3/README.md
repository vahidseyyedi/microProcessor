# کنترل روشنایی LED با استفاده از ورودی آنالوگ
## مقدمه
این پروژه به شما نشان می‌دهد که چگونه می‌توانید با استفاده از یک ورودی آنالوگ، روشنایی یک LED را به صورت پیوسته کنترل کنید. این کار با استفاده از تکنیک مدولاسیون پهنای پالس (PWM) انجام می‌شود. در این روش، عرض پالس‌های خروجی به صورت متناسب با مقدار ورودی آنالوگ تغییر می‌کند و در نتیجه، روشنایی LED تنظیم می‌شود.

# اجزای مورد نیاز
برد آردوینو
یک عدد LED
یک مقاومت (برای محدود کردن جریان LED)
یک پتانسیومتر
سیم‌های جامپر

# مدار
[در این قسمت می‌توانید یک شماتیک مدار قرار دهید یا از ابزاری مانند Fritzing برای ساخت آن استفاده کنید.]

# شرح مدار
پتانسیومتر به ورودی آنالوگ A0 آردوینو متصل می‌شود. خروجی پتانسیومتر ولتاژی متناسب با چرخش آن تولید می‌کند که این ولتاژ به عنوان ورودی آنالوگ خوانده می‌شود. LED نیز به یکی از پین‌های PWM آردوینو متصل می‌شود.
* تابع setup:
پین LED را به عنوان خروجی تنظیم می‌کند.
ارتباط سریال را برای نمایش مقادیر روی مانیتور سریال آغاز می‌کند.
* تابع loop:
مقدار ورودی آنالوگ را از پین A0 می‌خواند و در متغیر val ذخیره می‌کند.
مقدار خوانده شده را بر 4 تقسیم می‌کند تا در محدوده PWM (0 تا 255) قرار گیرد.
مقدار تقسیم شده را به عنوان مقدار PWM به پین LED می‌نویسد.
مقدار خوانده شده از ورودی آنالوگ را روی مانیتور سریال چاپ می‌کند.

# نحوه کار
پتانسیومتر را می‌چرخانید.
مقدار ولتاژ خروجی پتانسیومتر تغییر می‌کند.
آردوینو این ولتاژ را می‌خواند و به یک مقدار عددی بین 0 تا 1023 تبدیل می‌کند.
این مقدار عددی مقیاس‌بندی می‌شود تا در محدوده PWM قرار گیرد.
مقدار مقیاس‌بندی شده به عنوان عرض پالس به LED ارسال می‌شود.
با تغییر عرض پالس، روشنایی LED تغییر می‌کند.

# فایل 3.1
کد ارائه شده یک پروژه ساده‌ی آردوینو است که یک LED را با استفاده از یک پتانسیومتر کنترل می‌کند. در اینجا یک توضیح گام به گام از نحوه عملکرد کد آورده شده است:

# تعریف متغیرها:
led: شماره پین متصل به LED.
val: برای ذخیره مقدار خام خوانده شده از ورودی آنالوگ.
newval: برای ذخیره مقدار ولتاژ محاسبه شده.
* تابع setup:
پین LED را به عنوان خروجی تنظیم می‌کند.
ارتباط سریال را برای نمایش اطلاعات روی مانیتور سریال آغاز می‌کند.

* تابع loop:
مقدار خام ورودی آنالوگ را از پین A0 می‌خواند و در متغیر val ذخیره می‌کند.
محاسبه ولتاژ: مقدار خام را با مقدار مرجع ولتاژ آنالوگ آردوینو (5 ولت) ضرب کرده و سپس بر مقدار بیشینه خوانده شده آنالوگ (1023) تقسیم می‌کند تا ولتاژ دقیق را به دست آورد.
مقیاس‌بندی برای PWM: ولتاژ محاسبه شده را بر 4 تقسیم می‌کند تا در محدوده PWM (0 تا 255) قرار گیرد.
تنظیم PWM: مقدار مقیاس‌بندی شده را به عنوان عرض پالس به پین LED می‌نویسد.
نمایش مقدار: ولتاژ محاسبه شده را روی مانیتور سریال چاپ می‌کند.